{% extends "layout.html" %}

{% block content %}

<div class="card p-4">

<h4>
    <i class="bi bi-clipboard-data"></i>
    Monthly Submission Report
</h4>

<!-- FILTER SECTION -->
<div class="mt-3 mb-4">

<form method="GET" action="/report">

<div class="row">

    <div class="col-md-4">
        <label>Select Year</label>
        <select name="year" class="form-control">

            {% for y in range(2024, 2031) %}
                <option value="{{ y }}"
                    {% if selected_year == y|string %}selected{% endif %}>
                    {{ y }}
                </option>
            {% endfor %}

        </select>
    </div>

    <div class="col-md-4">
        <label>Select Month</label>

        <select name="month" class="form-control">

            {% set months = [
                ('01','January'), ('02','February'), ('03','March'),
                ('04','April'), ('05','May'), ('06','June'),
                ('07','July'), ('08','August'), ('09','September'),
                ('10','October'), ('11','November'), ('12','December')
            ] %}

            {% for m in months %}
                <option value="{{ m[0] }}"
                    {% if selected_month == m[0] %}selected{% endif %}>
                    {{ m[1] }}
                </option>
            {% endfor %}

        </select>
    </div>

    <div class="col-md-4">
        <label>&nbsp;</label>
        <button class="btn btn-primary w-100">
            View Report
        </button>
    </div>

</div>

</form>

</div>


<h5 class="mt-4">
    Showing Report for: {{ selected_year }}-{{ selected_month }}
</h5>


<table class="table mt-3">

<tr>
    <th>Customer</th>
    <th>Unique Code</th>
    <th>Status</th>
</tr>

{% for row in data %}
<tr>
    <td>{{ row[0] }}</td>
    <td>{{ row[1] }}</td>

    {% if row[2] == 'SUBMITTED' %}
    <td class="text-success fw-bold">
        <i class="bi bi-check-circle"></i> SUBMITTED
    </td>

    {% elif row[2] == 'NOT SUBMITTED' %}
    <td class="text-danger fw-bold">
        <i class="bi bi-x-circle"></i> NOT SUBMITTED
    </td>

    {% else %}
    <td class="text-warning fw-bold">
        <i class="bi bi-clock"></i> PENDING
    </td>
    {% endif %}
    
</tr>
{% endfor %}

</table>

</div>

{% endblock %}
